# 🔒 柳芯系统 - 模块锁定系统

## 系统简介

模块锁定系统是柳芯系统的安全保护机制，防止AI在升级或修改过程中意外破坏正常工作的功能模块。

## 核心特性

- ✅ **全链路保护** - 从MCP客户端到柳芯系统的完整链路锁定
- ✅ **口令解锁** - 只能通过用户明确指令来解锁
- ✅ **锁定反馈** - AI访问锁定模块时会收到明确提示
- ✅ **状态查询** - 随时查看所有模块的锁定状态
- ✅ **自动注册** - 新功能模块自动纳入保护

## 快速开始

### 查询锁定状态

```
查询锁定状态
```

### 解锁模块

```
解锁统计模块
```

### 锁定模块

```
锁定统计模块
```

## 文件说明

### `LockManager.js`
中央锁管理器，负责：
- 加载和保存锁定配置
- 检查模块锁定状态
- 执行锁定/解锁操作
- 显示锁定反馈消息
- 查询所有模块状态

### `lock-config.json`
锁定配置文件，存储：
- 所有模块的锁定状态
- 模块保护的文件列表
- 锁定/解锁的历史记录
- 自动注册规则

### `ModuleRegistrar.js`
模块注册器，负责：
- 扫描新创建的模块文件
- 自动识别模块类型
- 生成模块配置
- 注册到锁定系统

### `UnlockCommandHandler.js`
解锁指令处理器，负责：
- 识别用户的锁定/解锁命令
- 执行对应的操作
- 生成反馈消息

## 当前保护的模块

| 模块           | 状态     | 保护的文件                                               |
| -------------- | -------- | -------------------------------------------------------- |
| 统计模块       | 🔒 已锁定 | ResponseInterceptor.js<br>liuxin-mcp-server-unified.js   |
| MCP拦截器      | 🔒 已锁定 | liuxin-mcp-server-unified.js<br>ThreePhaseInterceptor.js |
| 规则引擎       | 🔒 已锁定 | liuxin-mcp-server-unified.js                             |
| Response拦截器 | 🔓 已解锁 | ResponseInterceptor.js                                   |

## 测试

运行完整测试：
```bash
node test-lock-system.js
```

运行场景测试：
```bash
node test-lock-protection-scenarios.js
```

## 详细文档

完整使用说明请查看：[🔒模块锁定系统使用手册.md](../🔒模块锁定系统使用手册.md)

快速参考请查看：[🔒快速参考卡.md](../🔒快速参考卡.md)

## 版本信息

- **当前版本**: v1.0
- **发布日期**: 2025-10-25
- **系统状态**: ✅ 运行正常

## 许可

柳芯系统内部使用





