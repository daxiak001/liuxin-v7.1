{
  "$schema": "AI友好的监控数据Schema",
  "version": "1.0.0",
  "description": "柳芯系统监控数据格式 - 为AI自动分析和优化设计",
  
  "ai_reading_guide": {
    "purpose": "该文件记录系统运行数据，供AI分析并生成优化建议",
    "how_to_read": "AI应按以下顺序读取：summary → problems → recommendations → detailed_data",
    "analysis_frequency": "建议每日分析一次，每周生成优化报告",
    "output_format": "AI应将分析结果写入 analysis/optimization-suggestions.json"
  },
  
  "data_structure": {
    "summary": {
      "type": "object",
      "description": "核心指标摘要，AI优先读取这部分",
      "fields": {
        "date": "数据日期",
        "execution_rate": "执行率（目标≥95%）",
        "violation_rate": "违规率（目标≤5%）",
        "skill_application_rate": "技能应用率（目标≥80%）",
        "test_pass_rate": "测试通过率（目标≥90%）",
        "total_conversations": "总对话数",
        "total_skill_triggers": "总技能触发次数",
        "total_violations_prevented": "总违规阻止次数",
        "total_violations_occurred": "总违规发生次数"
      }
    },
    
    "problems": {
      "type": "array",
      "description": "AI应重点关注的问题清单",
      "item_structure": {
        "problem_id": "问题唯一ID",
        "severity": "严重程度（critical/high/medium/low）",
        "type": "问题类型（skill_not_triggered/violation_rate_high/performance_slow等）",
        "description": "问题描述（AI易读的自然语言）",
        "affected_component": "受影响的组件（技能ID/规则ID）",
        "occurrence_count": "发生次数",
        "impact_score": "影响评分（0-100）",
        "suggested_fix": "建议修复方案",
        "data_evidence": "数据证据"
      }
    },
    
    "skills_performance": {
      "type": "object",
      "description": "每个技能的详细表现数据",
      "key_is_skill_id": "如 SK-001, SK-002...",
      "value_structure": {
        "skill_name": "技能名称",
        "trigger_count": "触发次数",
        "success_count": "成功次数",
        "failure_count": "失败次数",
        "success_rate": "成功率（%）",
        "avg_execution_time": "平均执行时间（秒）",
        "max_execution_time": "最大执行时间（秒）",
        "trigger_keywords_matched": "匹配的触发词列表",
        "missed_triggers": "应触发但未触发的场景",
        "false_triggers": "误触发的场景",
        "ai_should_check": "AI应检查：成功率<90%或触发率异常"
      }
    },
    
    "violations_tracking": {
      "type": "object",
      "description": "每个规则的违规追踪",
      "key_is_rule_id": "如 IR-047, IR-045...",
      "value_structure": {
        "rule_name": "规则名称",
        "violation_count": "违规次数",
        "prevented_count": "阻止次数",
        "prevention_rate": "阻止率（%）",
        "violation_contexts": "违规上下文列表（最近10条）",
        "common_violation_patterns": "常见违规模式",
        "ai_should_check": "AI应检查：阻止率<80%或违规次数>10"
      }
    },
    
    "time_series": {
      "type": "object",
      "description": "时间序列数据，用于趋势分析",
      "hourly": "每小时数据（保留24小时）",
      "daily": "每日数据（保留30天）",
      "weekly": "每周数据（保留12周）",
      "ai_should_check": "AI应识别异常波动和趋势"
    }
  }
}

